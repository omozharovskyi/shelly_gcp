{
  "Comment": "A state machine that processes files in an S3 bucket using a Lambda function and transfers files to GCP.",
  "StartAt": "InvokeLambda",
  "States": {
    "InvokeLambda": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:448325228795:function:shelly_mqtt_data_s3_postporcessing_lambda",
      "Next": "IsThereMoreFiles"
    },
    "IsThereMoreFiles": {
      "Type": "Choice",
      "Choices": [
        {
          "Variable": "$.hasMoreFiles",
          "BooleanEquals": true,
          "Next": "InvokeLambda"
        },
        {
          "Variable": "$.hasMoreFiles",
          "BooleanEquals": false,
          "Next": "TransferFilesToGCP"
        }
      ],
      "Default": "EndProcessing"
    },
    "TransferFilesToGCP": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:us-east-1:448325228795:function:TransferFilesToGCP",
      "Next": "EndProcessing"
    },
    "EndProcessing": {
      "Type": "Succeed"
    }
  }
}